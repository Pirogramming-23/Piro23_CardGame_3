{% extends 'base.html' %}
{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'cardGame/game-list.css' %}">
{% endblock %}

{% block content %}
<div class="page-title">Record List</div>
<div class="record-by">í˜„ì¬ í”Œë ˆì´ì–´: {{ username }}</div>
<hr>

{% for game in games %}
<div class="game-record-item">
    <div class="game-record-title">
        {{ game.pk }} {{ game.attacker.username }} VS {{ game.defender.username }}
    </div>

    <div class="game-condition">
        {% if game.status == 'completed' %}
            <div class="game-status">
                {% if game.winner == request.user %}
                    ê²°ê³¼: <span class="win-text">ğŸ‰ğŸ‰ìŠ¹ë¦¬ğŸ‰ğŸ‰</span>
                {% elif game.winner %}
                    ê²°ê³¼: <span class="lose-text">ğŸ˜­íŒ¨ë°°ğŸ˜­</span>
                {% else %}
                    ê²°ê³¼: <span class="draw-text">ğŸ¤ ë¬´ìŠ¹ë¶€</span>
                {% endif %}
            </div>
        {% elif game.status == 'pending' %}
            {% if game.attacker == request.user %}
                <div class="game-status">ì§„í–‰ì¤‘ ...</div>
                <form action="{% url 'cancel_game' game.pk %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="cancelgame-btn">ê²Œì„ ì·¨ì†Œ</button>
                </form>
            {% elif game.defender == request.user %}
                <a href="{% url 'game_mgp' %}" class="counterattack-btn">CounterAttack</a>
            {% endif %}
        {% else %}
            <div class="game-status">ì•Œ ìˆ˜ ì—†ëŠ” ê²Œì„ ìƒíƒœ</div>
        {% endif %}
    </div>
    <div class="game-detail-btn">
        <a href="{% url 'game_detail' game.pk %}" class="btn primary">ê²Œì„ ì •ë³´</a>
    </div>
</div>
{% empty %}
    <div class="no-records">
    <p>ì•„ì§ ì°¸ì—¬í•œ ê²Œì„ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    <a href="/game/start/" class="btn primary">ìƒˆ ê²Œì„ ì‹œì‘í•˜ê¸°</a>
    </div>
{% endfor %}

{% endblock %}